timely.define(["jquery","external_libs/jquery.scrollTo"],function(e){var t=function(t){t.preventDefault(),e("div.popover").remove();var n="jsonp",r=e(this).closest(".timely-calendar"),s={request_type:n,ai1ec_doing_ajax:!0,ai1ec:i(r)};e.ajax({url:e(this).attr("href"),dataType:n,data:s,method:"get",success:function(n){e(t.target).closest("#ai1ec-calendar-view").html(n.html);var i=e(".ai1ec-calendar-link").attr("href"),s=e(t.target).closest(".timely-calendar").data("action");s&&(i=i+"action:"+s+"/"),e.scrollTo(r,1e3,{offset:{left:0,top:-100}}),timely.require(["scripts/event"],function(e){e.start()})}})},n=function(e,t,n,i){var s=r(e),o=n.data(s);return o===undefined?t:(i?t.push(o):t.push(e+":"+o),t)},r=function(e){return e.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})},i=function(t){var r=e(t),i=[];return i=n("action",i,r),i=n("cat_ids",i,r),i=n("tag_ids",i,r),i=n("exact_date",i,r),i=n("no_navigation",i,r),i.join("|")};return{load_event_through_jsonp:t,create_ai1ec_to_send:i}});